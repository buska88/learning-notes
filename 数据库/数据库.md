# 数据库

## 1.sql语法

https://www.begtut.com/mysql/mysql-tutorial.html

**mysql窗口函数**：mysql8.0后支持，类似聚合函数，但是不会减少返回的行数(不会做进一步的统计分析)，

语法：

```
window_function_name(expression) 
    OVER (
        [partition_defintion]#分区
        [order_definition]#分区内排序
        [frame_definition]#分区的一个子集，
    ) 
```

**rank函数**：`RANK()`函数为结果集的分区中的每一行分配一个排名。行的等级由一加上前面的等级数指定。

一个简单的应用：已知学生的id和成绩，产生一个表显示(id，排名)；这种需求使用order by实现复杂，使用rank可以按照学生分数进行排序重新形成一列，列的元素是成绩对应的排名:{99->1,99->1,98->3}98在rank后的结果是3

denserank情况下98对应的是2

```sql
RANK() OVER (
    PARTITION BY <expression>[{,<expression>...}] #先对数据分区
    ORDER BY <expression> [ASC|DESC], [{,<expression>...}]#对每个分区内的结果进行排序
) 
```

**row number函数**：

类似rank，为应用分区的每一行分配一个递增序号(唯一的数字)

```
ROW_NUMBER() OVER (<partition_definition> <order_definition>) 
```

